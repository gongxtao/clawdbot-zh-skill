#!/usr/bin/env bash
# 表情搜索脚本

set -e

# 表情映射
declare -A EMOJI_MAP=(
  ["开心"]="😄 😁 😃 😄"
  ["高兴"]="😊 😃 😄"
  ["快乐"]="😁 😃 🎉 🎊"
  ["难过"]="😢 😭 😞"
  ["伤心"]="💔 😢 😭"
  ["生气"]="😠 😤 💢"
  ["愤怒"]="😡 💢🔥"
  ["惊讶"]="😮 😲 😱"
  ["害怕"]="😨 😱 💀"
  ["担心"]="😟 😰 😨"
  ["无语"]="😒 🙄 💭"
  ["尴尬"]="😓 😰 💦"
  ["笑"]="😂 🤣 😆"
  ["哭"]="😭 😢 😿"
  ["赞"]="👍 👍🏻 👍🏼 👍🏽 👍🏾 👍🏿"
  ["好"]="👌 ✅ 💯"
  ["爱心"]="❤️ 🧡 💛 💚 💙 💜 🖤 🤍 🤎"
  ["喜欢"]="❤️ 💕 💖 💗 💓 💘"
  ["星星"]="⭐ 🌟 ✨ 💫"
  ["太阳"]="☀️ 🌤️ 🌞"
  ["月亮"]="🌙 🌛 🌜 🌓"
  ["火焰"]="🔥 💥 🔥"
  ["钱"]="💰 💵 💴 💶 💷"
  ["胜利"]="✌️ 🏆 🥇 🎖️"
  ["停止"]="🛑 ⏹️ ⏸️"
  ["警告"]="⚠️ 🚨 ❗️ ❕"
  ["问号"]="❓ ⁉️ 💭 ❔"
  ["检查"]="✅ ✔️ ☑️ 🆗"
  ["鲜花"]="🌸 🌺 🌻 🌹 🌷"
  ["动物"]="🐱 🐶 🐰 🐼 🐨"
  ["食物"]="🍎 🍕 🍔 🍜 🍩"
  ["饮料"]="☕ 🍵 🧋 🥤 🍺"
  ["庆祝"]="🎉 🎊 🎁 🎈 🎀"
  ["音乐"]="🎵 🎶 🎼 🎹 🎸"
  ["电影"]="🎬 🎥 🍿 🎞️"
  ["游戏"]="🎮 🎰 🎲 🎱 🎳"
)

# 搜索表情
search_emoji() {
  local keyword="$1"
  
  echo "😀 表情搜索：'$keyword'"
  echo "━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━"
  echo ""
  
  local found=0
  for key in "${!EMOJI_MAP[@]}"; do
    if echo "$keyword" | grep -qiE "$key"; then
      echo "🎯 相关表情："
      echo ""
      echo "  ${EMOJI_MAP[$key]}"
      echo ""
      echo "💡 点击即可复制使用"
      found=1
      break
    fi
  done
  
  if [ $found -eq 0 ]; then
    echo "❌ 未找到匹配的表情"
    echo ""
    echo "💡 试试这些搜索词："
    echo "  心情：开心、难过、生气、惊讶"
    echo "  动作：点赞、爱心"
    echo "  自然：星星、月亮、太阳"
    echo "  动物：猫咪、狗狗"
  fi
}

# 主程序
main() {
  local input="$1"
  
  if [ -z "$input" ]; then
    echo "😀 表情搜索"
    echo ""
    echo "使用方法：搜索表情"
    echo "示例："
    echo "  开心的表情"
    echo "  生气的emoji"
    echo "  赞的表情"
    echo "  爱心的emoji"
    echo ""
    echo "支持的搜索："
    echo "  心情：开心、难过、生气、惊讶"
    echo "  动作：点赞、鼓掌"
    echo "  事物：星星、月亮、爱心"
    echo "  动物：猫咪、狗狗"
    return
  fi
  
  search_emoji "$input"
}

main "$@"
